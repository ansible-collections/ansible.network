---
- debug: msg="START resource manager list on connection={{ ansible_connection }}"

- set_fact:
    expected_list_output:
    - "acl_interfaces"
    - "acls"
    - "bgp_address_family"
    - "bgp_global"
    - "interfaces"
    - "l2_interfaces"
    - "l3_interfaces"
    - "lacp"
    - "lacp_interfaces"
    - "lag_interfaces"
    - "lldp_global"
    - "lldp_interfaces"
    - "logging_global"
    - "ospf_interfaces"
    - "ospfv2"
    - "ospfv3"
    - "prefix_lists"
    - "route_maps"
    - "static_routes"
    - "vlans"

- name: Run the network resource plugin
  ansible.netcommon.network_resource:
    os_name: "{{ ansible_network_os }}"
  register: result

- debug:
    msg: "{{ result }}"


- name: Assert the configuration is reflected on host
  assert:
    that:
      - result.changed == False
      - result.failed == False
      - "{{ expected_list_output | symmetric_difference(result['modules']) |length\
          \ == 0 }}"

- debug: msg="START resource manager list on connection={{ ansible_connection }}"

